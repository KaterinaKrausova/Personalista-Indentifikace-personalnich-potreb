<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-capable" content="yes">
    <title>HR V√Ωukov√© V√Ωzvy - Mobiln√≠ verze</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            padding-bottom: 30px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
        }

        .header h1 {
            font-size: clamp(1.5em, 6vw, 2em);
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .header p {
            opacity: 0.9;
            font-size: clamp(0.9em, 3.5vw, 1.1em);
            line-height: 1.3;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            height: 6px;
            border-radius: 10px;
            margin-top: 15px;
            overflow: hidden;
        }

        .progress-fill {
            background: #4ade80;
            height: 100%;
            width: 0%;
            transition: width 0.5s ease;
        }

        .score-board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 15px;
            background: #f8fafc;
            border-bottom: 2px solid #e2e8f0;
        }

        .score-item {
            text-align: center;
        }

        .score-item .label {
            color: #64748b;
            font-size: clamp(0.7em, 2.5vw, 0.85em);
            margin-bottom: 4px;
        }

        .score-item .value {
            font-size: clamp(1.2em, 4.5vw, 1.6em);
            font-weight: bold;
            color: #667eea;
        }

        .challenges {
            padding: 15px;
        }

        .challenge {
            background: #f8fafc;
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            border: 2px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .challenge.completed {
            background: #f0fdf4;
            border-color: #4ade80;
        }

        .challenge-header {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .challenge-title {
            font-size: clamp(1em, 4vw, 1.2em);
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 8px;
            line-height: 1.3;
        }

        .challenge-badge {
            background: #667eea;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: clamp(0.7em, 3vw, 0.8em);
            font-weight: bold;
            align-self: flex-start;
        }

        .challenge-description {
            color: #475569;
            line-height: 1.5;
            margin-bottom: 15px;
            font-size: clamp(0.85em, 3.5vw, 0.95em);
        }

        .task-area {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin-top: 12px;
        }

        .option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: clamp(0.85em, 3.5vw, 0.95em);
            line-height: 1.4;
            -webkit-user-select: none;
            user-select: none;
        }

        .option:active {
            transform: scale(0.98);
        }

        .option.selected {
            background: #ede9fe;
            border-color: #667eea;
        }

        .option.correct {
            background: #f0fdf4;
            border-color: #4ade80;
        }

        .option.incorrect {
            background: #fef2f2;
            border-color: #ef4444;
        }

        .drag-item {
            background: #667eea;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin: 6px;
            display: inline-block;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: clamp(0.8em, 3.5vw, 0.9em);
            -webkit-user-select: none;
            user-select: none;
            touch-action: none;
        }

        .drag-item:active {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .drop-zone {
            min-height: 70px;
            border: 2px dashed #cbd5e1;
            border-radius: 10px;
            padding: 12px;
            margin: 8px 0;
            background: #f8fafc;
        }

        .drop-zone.drag-over {
            background: #ede9fe;
            border-color: #667eea;
        }

        .drop-zone-label {
            font-weight: bold;
            color: #475569;
            margin-bottom: 8px;
            font-size: clamp(0.85em, 3.5vw, 0.95em);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: clamp(0.9em, 3.5vw, 1em);
            margin: 8px 0;
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea.input-field {
            min-height: 80px;
            resize: vertical;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 10px;
            font-size: clamp(0.9em, 3.5vw, 1em);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            -webkit-user-select: none;
            user-select: none;
        }

        .btn:active {
            transform: scale(0.98);
            background: #5568d3;
        }

        .btn:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            margin-top: 12px;
            padding: 12px;
            border-radius: 8px;
            display: none;
            font-size: clamp(0.85em, 3.5vw, 0.95em);
            line-height: 1.5;
        }

        .feedback.show {
            display: block;
        }

        .feedback.success {
            background: #f0fdf4;
            border: 2px solid #4ade80;
            color: #166534;
        }

        .feedback.error {
            background: #fef2f2;
            border: 2px solid #ef4444;
            color: #991b1b;
        }

        .feedback.info {
            background: #eff6ff;
            border: 2px solid #3b82f6;
            color: #1e3a8a;
        }

        .emoji {
            font-size: 1.3em;
            margin-right: 4px;
        }

        .tip-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 12px;
            margin: 12px 0;
            border-radius: 5px;
            font-size: clamp(0.85em, 3.5vw, 0.9em);
            line-height: 1.5;
        }

        .tip-box strong {
            color: #92400e;
        }

        /* iOS specific fixes */
        @supports (-webkit-touch-callout: none) {
            .btn {
                -webkit-appearance: none;
                appearance: none;
            }
            
            .input-field {
                -webkit-appearance: none;
                appearance: none;
            }
        }

        /* Landscape mode */
        @media (orientation: landscape) and (max-height: 500px) {
            body {
                padding: 5px;
            }
            
            .header {
                padding: 15px;
            }
            
            .challenges {
                padding: 10px;
            }
        }

        /* Very small screens */
        @media (max-width: 360px) {
            .challenge {
                padding: 15px;
            }
            
            .task-area {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ HR V√Ωukov√© V√Ωzvy</h1>
            <p>Kompetenƒçn√≠ modely & Popisy pracovn√≠ch pozic</p>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
        </div>

        <div class="score-board">
            <div class="score-item">
                <div class="label">Dokonƒçen√©</div>
                <div class="value" id="completedCount">0/5</div>
            </div>
            <div class="score-item">
                <div class="label">Body</div>
                <div class="value" id="totalPoints">0</div>
            </div>
            <div class="score-item">
                <div class="label">Level</div>
                <div class="value" id="level">üå±</div>
            </div>
        </div>

        <div class="challenges">
            <!-- Challenge 1: Detektivn√≠ pr√°ce -->
            <div class="challenge" id="challenge1">
                <div class="challenge-header">
                    <div class="challenge-title">
                        <span class="emoji">üïµÔ∏è</span>
                        <span>V√Ωzva 1: Detektivn√≠ pr√°ce</span>
                    </div>
                    <div class="challenge-badge">20 bod≈Ø</div>
                </div>
                <div class="challenge-description">
                    Rozt≈ôiƒète polo≈æky - kter√© jsou <strong>pracovn√≠ √∫koly</strong> a kter√© <strong>osobn√≠ vlastnosti</strong>? Klepnƒõte na polo≈æku pro p≈ôesun.
                </div>
                <div class="task-area">
                    <div class="drop-zone-label">üéØ Pracovn√≠ √∫koly:</div>
                    <div class="drop-zone" id="tasks-zone"></div>
                    
                    <div class="drop-zone-label">üíé Osobn√≠ vlastnosti:</div>
                    <div class="drop-zone" id="traits-zone"></div>
                    
                    <div style="margin-top: 15px;">
                        <div class="drop-zone-label">üìã K rozt≈ô√≠dƒõn√≠ (klepnƒõte na polo≈æku):</div>
                        <div id="items-pool">
                            <span class="drag-item" data-type="task" onclick="moveItemMobile(this, 'tasks-zone')">Tvorba marketingov√Ωch kampan√≠</span>
                            <span class="drag-item" data-type="trait" onclick="moveItemMobile(this, 'traits-zone')">Kreativn√≠ my≈°len√≠</span>
                            <span class="drag-item" data-type="task" onclick="moveItemMobile(this, 'tasks-zone')">Spr√°va soci√°ln√≠ch m√©di√≠</span>
                            <span class="drag-item" data-type="trait" onclick="moveItemMobile(this, 'traits-zone')">Komunikativnost</span>
                            <span class="drag-item" data-type="task" onclick="moveItemMobile(this, 'tasks-zone')">Anal√Ωza tr≈æn√≠ch trend≈Ø</span>
                            <span class="drag-item" data-type="trait" onclick="moveItemMobile(this, 'traits-zone')">Schopnost pracovat pod tlakem</span>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="checkChallenge1()">Zkontrolovat</button>
                    <div class="feedback" id="feedback1"></div>
                </div>
            </div>

            <!-- Challenge 2: Kompetenƒçn√≠ puzzle -->
            <div class="challenge" id="challenge2">
                <div class="challenge-header">
                    <div class="challenge-title">
                        <span class="emoji">üß©</span>
                        <span>V√Ωzva 2: Kompetenƒçn√≠ puzzle</span>
                    </div>
                    <div class="challenge-badge">25 bod≈Ø</div>
                </div>
                <div class="challenge-description">
                    Vyberte <strong>3 hlavn√≠ kompetence</strong> pro IT supportov√©ho specialistu.
                </div>
                <div class="tip-box">
                    <strong>üí° Tip:</strong> IT support ≈ôe≈°√≠ technick√© probl√©my u≈æivatel≈Ø, komunikuje s lidmi a pracuje s r≈Øzn√Ωmi syst√©my.
                </div>
                <div class="task-area">
                    <div class="option" onclick="toggleOption(this, 'c2-1')">
                        <strong>Technick√° expert√≠za</strong> - Schopnost diagnostikovat a ≈ôe≈°it IT probl√©my
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c2-2')">
                        <strong>Kreativn√≠ design</strong> - Tvorba grafick√Ωch n√°vrh≈Ø
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c2-3')">
                        <strong>Z√°kaznick√° komunikace</strong> - Vysvƒõtlit technick√© vƒõci srozumitelnƒõ
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c2-4')">
                        <strong>Finanƒçn√≠ anal√Ωza</strong> - Pr√°ce s rozpoƒçty
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c2-5')">
                        <strong>≈òe≈°en√≠ probl√©m≈Ø</strong> - Analytick√© my≈°len√≠
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c2-6')">
                        <strong>Veden√≠ t√Ωmu</strong> - Management pod≈ô√≠zen√Ωch
                    </div>
                    
                    <button class="btn" onclick="checkChallenge2()">Zkontrolovat v√Ωbƒõr</button>
                    <div class="feedback" id="feedback2"></div>
                </div>
            </div>

            <!-- Challenge 3: Rychl√° diagn√≥za -->
            <div class="challenge" id="challenge3">
                <div class="challenge-header">
                    <div class="challenge-title">
                        <span class="emoji">‚ö°</span>
                        <span>V√Ωzva 3: Rychl√° diagn√≥za</span>
                    </div>
                    <div class="challenge-badge">30 bod≈Ø</div>
                </div>
                <div class="challenge-description">
                    Najdƒõte <strong>3 chyby</strong> v tomto popisu pozice "√öƒçetn√≠":
                </div>
                <div class="task-area">
                    <div style="background: #f1f5f9; padding: 15px; border-radius: 10px; margin: 12px 0; line-height: 1.6; font-size: clamp(0.8em, 3.2vw, 0.9em);">
                        <strong>POPIS POZICE: √öƒåETN√ç</strong><br><br>
                        <em>"Hled√°me nad≈°en√©ho √∫ƒçetn√≠ho, kter√Ω mus√≠ b√Ωt mu≈æ ve vƒõku 25-35 let. Kandid√°t mus√≠ b√Ωt perfekcionista, kter√Ω nikdy nedƒõl√° chyby. Bude odpovƒõdn√Ω za veden√≠ √∫ƒçetnictv√≠, zpracov√°n√≠ faktur a p≈ô√≠pravu da≈àov√Ωch p≈ôizn√°n√≠. Vy≈æadujeme absolutn√≠ oddanost firmƒõ a ochotu pracovat i o v√≠kendech bez n√°roku na volno. Plat 25 000 Kƒç mƒõs√≠ƒçnƒõ."</em>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <label style="font-weight: bold; display: block; margin-bottom: 8px; font-size: clamp(0.85em, 3.5vw, 0.95em);">Napi≈°te 3 chyby:</label>
                        <input type="text" class="input-field" id="error1" placeholder="Chyba 1...">
                        <input type="text" class="input-field" id="error2" placeholder="Chyba 2...">
                        <input type="text" class="input-field" id="error3" placeholder="Chyba 3...">
                    </div>
                    
                    <button class="btn" onclick="checkChallenge3()">Odeslat odpovƒõdi</button>
                    <div class="feedback" id="feedback3"></div>
                </div>
            </div>

            <!-- Challenge 4: Simul√°tor rozhovoru -->
            <div class="challenge" id="challenge4">
                <div class="challenge-header">
                    <div class="challenge-title">
                        <span class="emoji">üé≠</span>
                        <span>V√Ωzva 4: Simul√°tor rozhovoru</span>
                    </div>
                    <div class="challenge-badge">35 bod≈Ø</div>
                </div>
                <div class="challenge-description">
                    Vedouc√≠ ≈ô√≠k√°: "Pot≈ôebuju nƒõkoho nov√©ho, lidi to nest√≠haj√≠!" Vyberte <strong>4 nejlep≈°√≠ ot√°zky</strong>:
                </div>
                <div class="task-area">
                    <div class="option" onclick="toggleOption(this, 'c4-1')">
                        Jak√© konkr√©tn√≠ √∫koly moment√°lnƒõ nest√≠h√°te?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-2')">
                        Kolik chcete za tu pozici platit?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-3')">
                        Jak√© dovednosti by ide√°ln√≠ kandid√°t mƒõl m√≠t?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-4')">
                        Kdy pot≈ôebujete, aby ten ƒçlovƒõk nastoupil?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-5')">
                        Komu by nov√Ω zamƒõstnanec p≈ô√≠mo zodpov√≠dal?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-6')">
                        Jak√Ω je v√°≈° obl√≠ben√Ω typ osobnosti?
                    </div>
                    <div class="option" onclick="toggleOption(this, 'c4-7')">
                        Jak√© jsou hlavn√≠ c√≠le oddƒõlen√≠ pro p≈ô√≠≈°t√≠ rok?
                    </div>
                    
                    <button class="btn" onclick="checkChallenge4()">Zkontrolovat ot√°zky</button>
                    <div class="feedback" id="feedback4"></div>
                </div>
            </div>

            <!-- Challenge 5: Fin√°ln√≠ mise -->
            <div class="challenge" id="challenge5">
                <div class="challenge-header">
                    <div class="challenge-title">
                        <span class="emoji">üèÜ</span>
                        <span>V√Ωzva 5: Fin√°ln√≠ mise</span>
                    </div>
                    <div class="challenge-badge">40 bod≈Ø</div>
                </div>
                <div class="challenge-description">
                    Vytvo≈ôte z√°kladn√≠ kostru popisu pozice pro <strong>"Asistent/ka z√°kaznick√©ho servisu"</strong>.
                </div>
                <div class="tip-box">
                    <strong>üí° Nezapome≈àte:</strong> Dobr√Ω popis m√° n√°zev, hlavn√≠ odpovƒõdnosti, pot≈ôebn√© kompetence a nen√≠ diskriminuj√≠c√≠.
                </div>
                <div class="task-area">
                    <label style="font-weight: bold; display: block; margin: 12px 0 6px 0; font-size: clamp(0.85em, 3.5vw, 0.95em);">N√°zev pozice:</label>
                    <input type="text" class="input-field" id="jobTitle" value="Asistent/ka z√°kaznick√©ho servisu" readonly style="background: #f1f5f9;">
                    
                    <label style="font-weight: bold; display: block; margin: 12px 0 6px 0; font-size: clamp(0.85em, 3.5vw, 0.95em);">3 hlavn√≠ odpovƒõdnosti:</label>
                    <textarea class="input-field" id="responsibilities" placeholder="Nap≈ô.: 
1. Komunikace se z√°kazn√≠ky...
2. ...
3. ..."></textarea>
                    
                    <label style="font-weight: bold; display: block; margin: 12px 0 6px 0; font-size: clamp(0.85em, 3.5vw, 0.95em);">3 kl√≠ƒçov√© kompetence:</label>
                    <textarea class="input-field" id="competencies" placeholder="Nap≈ô.: 
1. Komunikaƒçn√≠ dovednosti...
2. ...
3. ..."></textarea>
                    
                    <button class="btn" onclick="checkChallenge5()">Odeslat popis pozice</button>
                    <div class="feedback" id="feedback5"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let gameState = {
            completed: new Set(),
            points: 0,
            selectedOptions: {}
        };

        // Mobile item movement
        function moveItemMobile(element, targetZoneId) {
            const targetZone = document.getElementById(targetZoneId);
            if (targetZone && element.parentElement.id !== targetZoneId) {
                targetZone.appendChild(element);
                // Visual feedback
                element.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    element.style.transform = '';
                }, 200);
            }
        }

        function toggleOption(element, id) {
            if (element.classList.contains('correct') || element.classList.contains('incorrect')) {
                return;
            }
            element.classList.toggle('selected');
        }

        function checkChallenge1() {
            const tasksZone = document.getElementById('tasks-zone');
            const traitsZone = document.getElementById('traits-zone');
            const feedback = document.getElementById('feedback1');

            const tasksItems = Array.from(tasksZone.children);
            const traitsItems = Array.from(traitsZone.children);

            let correct = true;
            let score = 0;

            tasksItems.forEach(item => {
                if (item.dataset.type === 'task') {
                    score += 3;
                } else {
                    correct = false;
                }
            });

            traitsItems.forEach(item => {
                if (item.dataset.type === 'trait') {
                    score += 3;
                } else {
                    correct = false;
                }
            });

            if (tasksItems.length === 3 && traitsItems.length === 3 && correct) {
                feedback.className = 'feedback success show';
                feedback.innerHTML = '<span class="emoji">üéâ</span><strong>V√Ωbornƒõ!</strong> Perfektnƒõ jste rozli≈°ili pracovn√≠ √∫koly od osobn√≠ch vlastnost√≠. +20 bod≈Ø';
                completeChallenge('challenge1', 20);
            } else if (score > 12) {
                feedback.className = 'feedback info show';
                feedback.innerHTML = '<span class="emoji">üëç</span><strong>Skoro!</strong> Pracovn√≠ √∫koly jsou konkr√©tn√≠ ƒçinnosti, vlastnosti jsou to, JAK je ƒçlovƒõk vykon√°v√°.';
            } else {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">ü§î</span><strong>Zkuste to znovu!</strong> Tip: Pracovn√≠ √∫koly = "Co bude dƒõlat?", vlastnosti = "Jak√Ω by mƒõl b√Ωt?"';
            }
        }

        function checkChallenge2() {
            const options = document.querySelectorAll('#challenge2 .option');
            const selected = Array.from(options).filter(opt => opt.classList.contains('selected'));
            const feedback = document.getElementById('feedback2');

            if (selected.length !== 3) {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">‚ö†Ô∏è</span>Vyberte pros√≠m p≈ôesnƒõ 3 kompetence!';
                return;
            }

            const correctIds = ['c2-1', 'c2-3', 'c2-5'];
            const selectedIds = Array.from(selected).map(opt => opt.getAttribute('onclick').match(/'([^']+)'/)[1]);

            const allCorrect = correctIds.every(id => selectedIds.includes(id)) && selectedIds.length === 3;

            options.forEach(opt => {
                const id = opt.getAttribute('onclick').match(/'([^']+)'/)[1];
                if (correctIds.includes(id)) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            });

            if (allCorrect) {
                feedback.className = 'feedback success show';
                feedback.innerHTML = '<span class="emoji">üåü</span><strong>Skvƒõl√° pr√°ce!</strong> Vybrali jste p≈ôesnƒõ ty kompetence, kter√© IT support skuteƒçnƒõ pot≈ôebuje. +25 bod≈Ø';
                completeChallenge('challenge2', 25);
            } else {
                feedback.className = 'feedback info show';
                feedback.innerHTML = '<span class="emoji">üí≠</span><strong>Je≈°tƒõ to nen√≠ ono.</strong> Zelen√© jsou spr√°vn√© odpovƒõdi. IT support prim√°rnƒõ ≈ôe≈°√≠ technick√© probl√©my a pom√°h√° u≈æivatel≈Øm.';
            }
        }

        function checkChallenge3() {
            const error1 = document.getElementById('error1').value.toLowerCase();
            const error2 = document.getElementById('error2').value.toLowerCase();
            const error3 = document.getElementById('error3').value.toLowerCase();
            const feedback = document.getElementById('feedback3');

            const allErrors = (error1 + ' ' + error2 + ' ' + error3).toLowerCase();
            
            let foundErrors = 0;
            const errorTypes = {
                discrimination: false,
                unrealistic: false,
                illegal: false
            };

            if (allErrors.includes('mu≈æ') || allErrors.includes('pohlav√≠') || allErrors.includes('vƒõk') || 
                allErrors.includes('25-35') || allErrors.includes('diskriminace') || allErrors.includes('gender')) {
                errorTypes.discrimination = true;
                foundErrors++;
            }

            if (allErrors.includes('perfekcionista') || allErrors.includes('nikdy') || allErrors.includes('chyb') ||
                allErrors.includes('nere√°ln√©') || allErrors.includes('nerealistick')) {
                errorTypes.unrealistic = true;
                foundErrors++;
            }

            if (allErrors.includes('v√≠kend') || allErrors.includes('volno') || allErrors.includes('plat') || 
                allErrors.includes('25000') || allErrors.includes('25 000') || allErrors.includes('n√≠zk') ||
                allErrors.includes('mzda') || allErrors.includes('oddanost')) {
                errorTypes.illegal = true;
                foundErrors++;
            }

            if (foundErrors >= 3 || (foundErrors >= 2 && (error1 && error2 && error3))) {
                feedback.className = 'feedback success show';
                feedback.innerHTML = '<span class="emoji">üéØ</span><strong>V√Ωbornƒõ!</strong> Na≈°li jste hlavn√≠ probl√©my:<br>' +
                    '1Ô∏è‚É£ Diskriminace podle pohlav√≠ a vƒõku<br>' +
                    '2Ô∏è‚É£ Nerealistick√© oƒçek√°v√°n√≠<br>' +
                    '3Ô∏è‚É£ Problematick√© podm√≠nky a n√≠zk√Ω plat<br>+30 bod≈Ø';
                completeChallenge('challenge3', 30);
            } else if (foundErrors >= 1) {
                feedback.className = 'feedback info show';
                feedback.innerHTML = '<span class="emoji">üîç</span><strong>Na≈°li jste nƒõco, ale ne v≈°echno!</strong> Tip: Pod√≠vejte se na po≈æadavky na pohlav√≠/vƒõk, realistick√° oƒçek√°v√°n√≠ a pracovn√≠ podm√≠nky.';
            } else {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">ü§î</span><strong>Zkuste to znovu!</strong> Hledejte: diskriminaci, realistick√° oƒçek√°v√°n√≠ a z√°konnost po≈æadavk≈Ø.';
            }
        }

        function checkChallenge4() {
            const options = document.querySelectorAll('#challenge4 .option');
            const selected = Array.from(options).filter(opt => opt.classList.contains('selected'));
            const feedback = document.getElementById('feedback4');

            if (selected.length !== 4) {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">‚ö†Ô∏è</span>Vyberte pros√≠m p≈ôesnƒõ 4 ot√°zky!';
                return;
            }

            const correctIds = ['c4-1', 'c4-3', 'c4-5', 'c4-7'];
            const selectedIds = Array.from(selected).map(opt => opt.getAttribute('onclick').match(/'([^']+)'/)[1]);

            const allCorrect = correctIds.every(id => selectedIds.includes(id)) && selectedIds.length === 4;

            options.forEach(opt => {
                const id = opt.getAttribute('onclick').match(/'([^']+)'/)[1];
                if (correctIds.includes(id)) {
                    opt.classList.add('correct');
                } else if (opt.classList.contains('selected')) {
                    opt.classList.add('incorrect');
                }
            });

            if (allCorrect) {
                feedback.className = 'feedback success show';
                feedback.innerHTML = '<span class="emoji">üé™</span><strong>Perfektn√≠ v√Ωbƒõr ot√°zek!</strong> Polo≈æili jste p≈ôesnƒõ ty ot√°zky, kter√© pomohou pochopit skuteƒçn√© pot≈ôeby oddƒõlen√≠. +35 bod≈Ø';
                completeChallenge('challenge4', 35);
            } else {
                feedback.className = 'feedback info show';
                feedback.innerHTML = '<span class="emoji">üìù</span><strong>Skoro!</strong> Zelen√© ot√°zky jsou spr√°vn√©. Zamƒõ≈ôte se na ot√°zky, kter√© zji≈°≈•uj√≠ konkr√©tn√≠ pot≈ôeby a kontext pozice.';
            }
        }

        function checkChallenge5() {
            const responsibilities = document.getElementById('responsibilities').value.trim();
            const competencies = document.getElementById('competencies').value.trim();
            const feedback = document.getElementById('feedback5');

            if (!responsibilities || !competencies) {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">‚ö†Ô∏è</span>Vypl≈àte pros√≠m obƒõ pole!';
                return;
            }

            if (responsibilities.length < 50 || competencies.length < 50) {
                feedback.className = 'feedback info show';
                feedback.innerHTML = '<span class="emoji">üìù</span><strong>P≈ôidejte v√≠ce detail≈Ø!</strong> Zkuste napsat konkr√©tnƒõj≈°√≠ odpovƒõdnosti a kompetence.';
                return;
            }

            const combined = (responsibilities + ' ' + competencies).toLowerCase();
            if (combined.includes('mu≈æ') || combined.includes('≈æena') || combined.includes('mlad√Ω') || 
                combined.includes('vƒõk') || combined.match(/\d{2}-\d{2}/)) {
                feedback.className = 'feedback error show';
                feedback.innerHTML = '<span class="emoji">‚õî</span><strong>Pozor na diskriminaci!</strong> Vyhnƒõte se zm√≠nk√°m o pohlav√≠, vƒõku nebo jin√Ωm diskriminaƒçn√≠m krit√©ri√≠m.';
                return;
            }

            feedback.className = 'feedback success show';
            feedback.innerHTML = '<span class="emoji">üèÜ</span><strong>Gratulujeme! Dokonƒçili jste v≈°echny v√Ωzvy!</strong><br><br>' +
                'Vytvo≈ôili jste sv≈Øj prvn√≠ popis pozice!<br><br>' +
                '<strong>Nauƒçili jste se:</strong><br>' +
                '‚úÖ Rozli≈°ovat √∫koly a vlastnosti<br>' +
                '‚úÖ Identifikovat kl√≠ƒçov√© kompetence<br>' +
                '‚úÖ Vyh√Ωbat se diskriminaci<br>' +
                '‚úÖ Kl√°st spr√°vn√© ot√°zky<br>' +
                '‚úÖ Vytvo≈ôit z√°kladn√≠ popis pozice<br><br>' +
                '+40 bod≈Ø a titul <strong>HR Expert</strong>! üåü';
            completeChallenge('challenge5', 40);
        }

        function completeChallenge(challengeId, points) {
            if (!gameState.completed.has(challengeId)) {
                gameState.completed.add(challengeId);
                gameState.points += points;
                document.getElementById(challengeId).classList.add('completed');
                updateScoreBoard();
                
                // Scroll to next challenge
                setTimeout(() => {
                    const nextChallenge = document.getElementById(challengeId).nextElementSibling;
                    if (nextChallenge && nextChallenge.classList.contains('challenge')) {
                        nextChallenge.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 1000);
            }
        }

        function updateScoreBoard() {
            const total = 5;
            const completed = gameState.completed.size;
            const percentage = (completed / total) * 100;

            document.getElementById('completedCount').textContent = `${completed}/${total}`;
            document.getElementById('totalPoints').textContent = gameState.points;
            document.getElementById('progressBar').style.width = percentage + '%';

            let level = 'üå±';
            if (gameState.points >= 120) level = 'üèÜ';
            else if (gameState.points >= 80) level = '‚≠ê';
            else if (gameState.points >= 40) level = 'üìö';

            document.getElementById('level').textContent = level;
        }

        // Prevent double-tap zoom on iOS
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);

        // Initialize
        updateScoreBoard();
    </script>
</body>
</html>